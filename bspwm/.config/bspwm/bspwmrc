#!/bin/zsh

xrandr --output DP1 --auto --right-of eDP1
xrandr --output HDMI1 --auto --left-of eDP1
xrandr --output HDMI2 --auto --right-of eDP1
xrandr --output VGA-1 --auto
xrandr --output VGA-2 --auto --right-of VGA-1

bspc monitor VGA-1 -d 1 2 3 4 5
bspc monitor VGA-2 -d 6 7 8 9 0
bspc monitor HDMI1 -d 1 2 3 4 5

bspc config border_width         2 
bspc config window_gap          12 
bspc config split_ratio          0.50 
bspc config borderless_monocle   true 
bspc config gapless_monocle      true 
bspc config focus_follows_pointer true 
bspc rule -a Gimp desktop='^8' state=floating follow=on 
bspc rule -a Chromium sticky=off
bspc rule -a Dia state=floating 
bspc rule -a Ibus-extension-gtk3 state=floating 
bspc rule -a Godot state=floating
bspc rule -a Pavucontrol state=floating
bspc rule -a Nm-connection-editor state=floating

# xrdb
function get_xrdb() {
  xrdb -query | grep "$1" | awk '{print $2}' | tail -n1
}
xrdb -merge "${HOME}/.Xresources"

# border color
bspc config normal_border_color "$(get_xrdb color7)"
bspc config focused_border_color "$(get_xrdb color12)"

# compositor
compton -b

# polybar
for m in $(xrandr --query | grep " connected" | cut -d" " -f1); do
  MONITOR=$m polybar --reload archi3 &
done

# keybindings
sxhkd &

# background image
if [ -e "$HOME/.fehbg" ]; then
  source "$HOME/.fehbg"
fi
# ibus input
ibus-daemon -rd

